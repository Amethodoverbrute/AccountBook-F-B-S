# 实现账单查询功能计划

## 1. 需求分析
- 实现基于title字段的模糊查询功能
- 支持搜索title的部分或整体内容
- 保持现有功能不变
- 界面友好，操作简单

## 2. 实现步骤

### 2.1 前端修改（Home.vue）
1. **添加搜索组件**：在账单列表上方添加搜索输入框和搜索按钮
2. **添加响应式变量**：添加searchKeyword变量用于存储搜索关键字
3. **修改fetchAccounts函数**：支持传入搜索关键字参数
4. **添加搜索处理函数**：处理搜索按钮点击事件
5. **添加搜索重置功能**：清除搜索条件

### 2.2 后端修改（account.js）
1. **修改GET /account路由**：添加对搜索参数的处理
2. **实现模糊搜索**：使用MongoDB的$regex操作符实现title字段的模糊搜索
3. **更新Swagger文档**：添加搜索参数的文档说明

## 3. 技术实现

### 3.1 前端实现
- 使用v-model双向绑定搜索输入
- 使用computed属性或直接修改API调用
- 搜索按钮点击时调用带搜索参数的fetchAccounts

### 3.2 后端实现
- 使用req.query获取搜索参数
- 使用MongoDB的$regex操作符进行模糊匹配
- 使用i选项实现大小写不敏感搜索

## 4. 代码修改点

### 4.1 前端修改点（Home.vue）
- **模板部分**：添加搜索输入框和按钮
- **脚本部分**：添加searchKeyword变量和搜索处理函数
- **样式部分**：添加搜索组件的样式

### 4.2 后端修改点（account.js）
- **路由处理函数**：修改GET /account路由，添加搜索逻辑
- **Swagger文档**：添加search参数的文档

## 5. 预期效果
- 用户可以在搜索框中输入关键字，点击搜索按钮
- 系统会显示所有title包含该关键字的账单
- 搜索结果实时更新
- 可以清除搜索条件，恢复显示所有账单

## 6. 测试计划
1. 测试空搜索关键字，应显示所有账单
2. 测试部分匹配，如输入"餐饮"，应显示所有title包含"餐饮"的账单
3. 测试完全匹配，应显示对应账单
4. 测试大小写不敏感，如输入"CAI"和"cai"应得到相同结果
5. 测试无匹配结果，应显示空状态